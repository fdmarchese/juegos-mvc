@model IEnumerable<Juego>

<section class="search-section">
    <div class="container">
        <form asp-action="Buscar" asp-controller="Juegos" method="get" novalidate="novalidate">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-lg-3 col-md-3 col-sm-12 p-0">
                            <input type="text" class="form-control search-input" name="titulo" placeholder="Nombre del juego" value="@ViewBag.Titulo">
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-12 p-0">
                            <select class="form-control search-input" name="consolaId" asp-items="ViewBag.Consolas">
                                <option value="">Elija una Consola</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-12 p-0">
                            <select class="form-control search-input" name="generoId" asp-items="ViewBag.Generos">
                                <option value="">Elija un Género</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-12 p-0">
                            <select class="form-control search-input" name="categoriaId" asp-items="ViewBag.Categorias">
                                <option value="">Elija una Categoría</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12 p-0">
                            <button type="submit" class="btn btn-info search-button">
                                Buscar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>

<div class="table-responsive">
    <table class="table table-hover table-striped table-sm">
        <thead>
            <tr>
                <th>Título</th>
                <th>Consola</th>
                <th>Géneros</th>
                <th>Categoría</th>
                <th>Año lanzamiento</th>
                <th>Precio</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (Juego juego in Model)
            {
                <tr>
                    <td>
                        @juego.Titulo
                    </td>
                    <td>
                        <i class="@juego.Consola.IconoCss fa-2x" title="@juego.Consola.Descripcion" data-toggle="tooltip"></i>
                    </td>
                    <td>
                        <!-- Se escriben TODOS los géneros de cada juego con sus descripciones separados por coma -->
                        @string.Join(", ", juego.Generos.Select(x => x.Genero.Descripcion))
                    </td>
                    <td class="@juego.Categoria.Css">
                        @juego.Categoria.Descripcion
                    </td>
                    <td>
                        @juego.AnioLanzamiento
                    </td>
                    <td>
                        $ @juego.PrecioOriginal.ToString("N2")
                    </td>
                    <td>
                        <a class="btn btn-outline-success btn-sm" href="#">
                            Comprar <i class="fas fa-dollar-sign"></i>
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
